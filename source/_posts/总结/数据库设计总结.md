---
title: 数据库设计总结
date: 2017-06-22 14:15:43
categories: 
- 总结
tags:
- 总结
- 数据库
---

####

- 尽可能符合数据库三大范式
- 具有可用性
- 尽量使用NOT NULL列，以便优化查询。NULL值难以被数据库优化。
- 为经常作为查询条件的列创建索引，以优化速度。
- 唯一索引可以优化查询速度。

#### 表优化和列类型选择

##### 表优化
1. 变长与定长字段分离（核心且常用字段宜建成定长字段放在一张表中）
2. 常用与不常用字段分离
3. 在需要一对多关联统计字段加冗余统计字段

##### 列类型选择
1. 字段类型优先级（整型 > date,time > enum,char > varchar > blob,text）
2. 定长字段长度满足需求前提下尽可能小，大的字段浪费内存，影响速度。
3. 尽量少用NULL，NULL不利于索引，需使用特殊字节标注。
 
 ###### 字段类型特点
 1. 整型：定长，无国家／地区，字符集差异
 2. time：定长，速度快，节省空间，考虑时区
 3. enum：能起到约束值的目的，内部使用整形存储，但使用char联查时，内部要经历char与整型转换
 4. char：定长，需考虑字符集与校对集（排序）
 5. varchar：不定长，需考虑字符集与校对集（排序）
 6. text，blob，无法使用内存临时表，排序等操作只能在磁盘进行

#### 索引类型（MYSQL）

- btree索引：默认使用，可以提高查询，排序，分组速度。
- hash索引：内存模式默认使用，速度快，利率时间复杂度为O(1)，缺点，Hash冲突，无法对范围查找进行优化，无法利用前缀索引，排序无法优化。

#### btree索引使用误区

1. 在where条件常用列都加上索引（独立的索引同时只能使用一个）
2. 多列建立索引后，where查询其中任何列都能使用索引（使用索引需满足左前缀要求，必须有前一个的查询条件才能使用后面列的索引）

###### 聚簇索引和非聚簇索引（MYSQL）
- 聚簇索引（数据和索引不分离 innodb的主索引文件，直接存放该行数据，次级索引指向对主键的引用）
- 非聚簇索引（数据和索引分离 myisam的主索引和次级索引，都指向物理行（磁盘位置））


###### 索引覆盖
- 如果查询的行恰好是索引的一部分，那么查询只需要在索引树上进行，不需要回行到磁盘文件中查找。

###### 理想的索引
1. 查询频繁
2. 区分度高（区分度越高，效果越好）
3. 长度小（长度越小速度越快）
4. 尽量能覆盖常用查询字段





#### 博客

- [mysql设计规范dba分享](http://blog.csdn.net/zl18310999566/article/details/54917607)